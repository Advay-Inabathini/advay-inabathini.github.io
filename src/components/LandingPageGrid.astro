---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import { photos } from '../data/landingPagePhotos.js';

// Dynamically import all images from the placeholders directory.
const imageModules = import.meta.glob<{ default: ImageMetadata }>('/src/assets/images/placeholders/*.{jpg,jpeg,png,gif}');
---

<div class="columns-2 md:columns-3 lg:columns-5 gap-4">
  {
    photos.map((photo) => {
      // Construct the expected path for the image module lookup.
      const imagePath = `/src/assets${photo.thumbnailSrc}`;
      
      if (!imageModules[imagePath]) {
        // Log a warning if a specific image isn't found.
        console.warn(`Image not found: "${imagePath}"`);
        return null;
      }

      return (
        <figure class="break-inside-avoid mb-4 overflow-hidden">
          <Image 
            src={imageModules[imagePath]()} 
            alt={photo.alt}
            layout="full-width"
            class="w-full h-auto"
          />
        </figure>
      )
    })
  }
</div> 